**使用jmeter进行压力测试**

1、性能指标

1）响应时间（Response Time: RT）

响应时间指 用户从客户端发起一个请求开始，到客户端接受到从服务端返回的响应结束，整个过程所耗费的时间

2）HPS（Hits Per Second）：每秒点击次数，一般不考虑

3）TPS（Transaction Per Second）：系统每秒处理交易数

4）QPS（Query Per Second）：系统每秒处理查询次数，一般而言TPS来衡量整个业务流程，QPS来衡量接口查询次数，用HPS来表示对服务器单击请求

5）金融行业：1000TPS~50000TPS 不包括秒杀等互联网化的活动

保险行业：100-100000

制造行业：10-5000

互联网电子商务：10000-1000000

互联网中型网站：1000-50000

互联网小型网站：500-10000

6）90%响应时间：指所有用户的响应时间进行排序，第90%的响应时间

7）从外部看，性能测试主要关注三个指标

1】吞吐量：每秒钟系统能处理的 请求数、任务数

2】响应时间：服务处理一个请求或一个任务的耗时

3】错误率：一批请求中结果出错的请求所占比例

**2、提升性能**

**1）可以将静态资源放入nginx中，就不用请求转发给nginx，再转给gateway，然后才访问静态资源，这叫动静分离**

**2）给用于查询的字段添加索引**

**3）尽量少查询数据库**

**4）使用缓存**



**JMeter Address Already in use 错误解决**

windows提供给TCP/IP链接的端口为1024-5000，并且要用四分钟来循环回收他们，就导致我们在短时间内跑大量的请求时将端口占满了。

1. cmd中，用regedit命令打开注册表
2. 在 HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\Tcpip\Parameters 下,
   1. 右击parameters，添加一个新的DWORD，名字为MaxUserPort
   2. 然后双击MaxUserPort，输入数值数据为65534，基数选择十进制（如果是分布式运
      行的话，控制机器和负载机器都需要这样操作哦）
   3. 添加TCPTimedWaitDelay:30，用来修改循环回收的时间
3. 修改配置完毕之后重启机器